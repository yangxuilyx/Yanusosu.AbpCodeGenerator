<template>
  <div class="form-container">
    <div class="form-main-container">
      <el-form
        ref="form"
        :model="@(Model.CamelCaseName)"
        :rules="rules"
        label-width="80px"
      >
      @foreach(var item in Model.MetaColumnInfos){
        if(item.IsCreateVisible){
    @:<el-form-item
    @:  label="@(item.DisplayName)"
    @:  prop="@(item.CamelCaseName)"
    @:  >
    @:  <el-input v-model="@(Model.CamelCaseName).@(item.CamelCaseName)" placeholder="@(item.DisplayName)"></el-input>
    @:</el-form-item>
	@:
      }}

     <el-form-item>
        <el-button
            type="primary"
            :loading="saving"
            @@click="save()"
          >立即添加</el-button>
          <el-button @@click="back()">取消</el-button>
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>

<script lang="ts">
import { Component, Vue } from "vue-property-decorator";
import { @(Model.CamelCaseName)Service } from "@@/api/@(Model.ModuleSplitName)/@(Model.SplitName)";
import FormBase from "@@/lib/view-base/formbase";
import { Create@(Model.Name)Dto } from "@@/api/service-proxies";

@@Component({
  name: "Create@(Model.Name)",
  components: {}
})
export default class Create@(Model.Name) extends FormBase {
  @(Model.CamelCaseName): Create@(Model.Name)Dto = new Create@(Model.Name)Dto();

  rules: object = {
      @foreach(var item in Model.MetaColumnInfos){
        if(item.IsCreateVisible){
      @:  @(item.CamelCaseName): [
          if(item.Required){
      @:    { required: true, message: "请输入@(item.DisplayName)", trigger: "blur" },  
          }
          if(item.MaxLength.HasValue){
      @:    { max: @(item.MaxLength), message: '@(item.DisplayName)最大长度为@(item.MaxLength)', trigger: 'blur' }  
          }
      @:    
      @:],
        }}
  };

  mounted() {
  }

  async submitExecute(): Promise<void> {
    await @(Model.CamelCaseName)Service.create(this.@(Model.CamelCaseName));
  }
}
</script>
